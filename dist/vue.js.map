{"version":3,"file":"vue.js","sources":["../src/observer/array.js","../src/observer/index.js","../src/state.js","../src/compiler/parse.js","../src/compiler/generate.js","../src/compiler/index.js","../src/observer/watcher.js","../src/vdom/patch.js","../src/lifecycle.js","../src/init.js","../src/vdom/index.js","../src/render.js","../src/index.js"],"sourcesContent":["let oldArrayProtoMethods = Array.prototype;\r\n\r\n// 不能直接改写数组原有方法 不可靠，因为只有被vue控制的数组才需要改写\r\nexport let arrayMethods=Object.create(Array.prototype);\r\nlet methods=[\r\n    \"push\",\r\n    \"pop\",\r\n    \"shift\",\r\n    \"unshift\",\r\n    \"splice\",\r\n    \"reverse\",\r\n    \"sort\"\r\n];\r\nmethods.forEach(method=>{   // AOP切片编程\r\n    arrayMethods[method] = function (...args) { // 重写数组方法\r\n        // todo ...\r\n        // 有可能用户新增的数据时对象格式 也需要进行拦截\r\n        let result = oldArrayProtoMethods[method].call(this,...args);\r\n        let inserted;\r\n        let ob = this.__ob__\r\n        switch (method) {\r\n            case 'push':\r\n            case 'unshift':\r\n                inserted = args;\r\n                break;\r\n            case 'splice': // splice(0,1,xxxx)\r\n                inserted = args.slice(2);\r\n            default:\r\n                break;\r\n        }\r\n        if(inserted)  ob.observeArray(inserted);\r\n        return result;\r\n    }\r\n})\r\n","import { arrayMethods } from \"./array\";\r\nexport function observe(data) {\r\n  //只对对象类型进行观测  非对象类型无法观测\r\n  if (typeof data !== \"object\" || data == null) {\r\n    console.error(\"请将data写成函数形式，并return一个对象\");\r\n    return;\r\n  }\r\n  //通过类来实现对象数据的观测，类可以方便扩展，会产生实例\r\n  return new Observer(data);\r\n}\r\n\r\nclass Observer {\r\n  constructor(value) {\r\n    // 需要对这个value属性重新定义\r\n    // value可能是对象 可能是数组，分类来处理\r\n    // value.__ob__ = this;\r\n    Object.defineProperty(value, \"__ob__\", {\r\n      value: this,\r\n      enumerable: false, // 不能被枚举表示 不能被循环\r\n      configurable: false, // 不能删除此属性\r\n    });\r\n    if (Array.isArray(value)) {\r\n      // 数组不用defineProperty来进行代理 性能不好\r\n      // push shift reverse sort  我要重写这些方法增加更新逻辑\r\n      Object.setPrototypeOf(value, arrayMethods); // 循环将属性赋予上去\r\n      this.observeArray(value); // 原有数组中的对象  Object.freeze()\r\n    } else {\r\n      this.walk(value);\r\n    }\r\n  }\r\n  observeArray(value) {\r\n    for (let i = 0; i < value.length; i++) {\r\n      observe(value[i]);\r\n    }\r\n  }\r\n  walk(data) {\r\n    for (const key in data) {\r\n      defineReactive(data, key, data[key]);\r\n    }\r\n  }\r\n}\r\nexport function defineReactive(data, key, value) {\r\n  if (typeof value === \"object\") {\r\n    observe(value);\r\n  }\r\n  Object.defineProperty(data, key, {\r\n    get() {\r\n      //收集依赖待写\r\n      return value;\r\n    },\r\n    set(newValue) {\r\n      if (newValue === value) return;\r\n      observe(newValue);\r\n      value = newValue;\r\n    },\r\n  });\r\n}\r\n","import {observe} from \"./observer/index\"\r\n//初始化Vue的数据 data computed watch...\r\nexport function initState(vm){\r\n    //将所有数据都定义在vm属性上，并且后续更新 需要触发视图更新\r\n    const opts=vm.$options;//获取用户属性\r\n    if(opts.data){\r\n        initData(vm)\r\n    }\r\n\r\n}\r\n\r\nfunction initData(vm){\r\n    let data=vm.$options.data;\r\n    if(typeof data!==\"function\"){\r\n        console.error(\"请将data写成函数形式，并return一个对象\")\r\n        return\r\n    }\r\n    data=vm._data=data.call(vm);\r\n    //通过vm._data 做个代理，后边用户就可以取到this.xx\r\n    for(let key in data){\r\n        Proxy(vm,\"_data\",key);\r\n    }\r\n    //监听data里的属性，定义setter,getter\r\n    observe(data);\r\n}\r\nfunction Proxy(vm,source,key){\r\n    Object.defineProperty(vm,key,{\r\n        get(){\r\n            return vm[source][key];\r\n        },\r\n        set(newValue){\r\n            vm[source][key]=newValue\r\n        }\r\n    })\r\n}","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // aa-aa\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; //aa:aa\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 可以匹配到标签名  [1]\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); //[0] 标签的结束名字\r\n//    style=\"xxx\"   style='xxx'  style=xxx\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\r\nconst startTagClose = /^\\s*(\\/?)>/;\r\n\r\nexport function parseHTML(html) {\r\n  //<\r\n  function createASTElement(tag, attrs) {\r\n    // vue3里面支持多个根元素 (外层加了一个空元素) vue2中只有一个根节点\r\n    return {\r\n      tag,\r\n      type: 1,\r\n      children: [],\r\n      attrs,\r\n      parent: null,\r\n    };\r\n  }\r\n  let root = null;\r\n  let currentParent;\r\n  let stack = [];//栈结构记录标签关系，start push， end取出最后一个元素后，stack的最后一个就是取出来的父元素\r\n  //   <div id=\"app\" a=1 b=2 style=\"color:green\">\r\n  //   <ul>\r\n  //       <li>{{name}}</li>\r\n  //       <li>{{age}}</li>\r\n  //   </ul>\r\n  // </div>\r\n  //根据开始标签 结束标签 文本内容 生成一个ast语法树\r\n  function start(tagName, attrs) {\r\n    let element = createASTElement(tagName, attrs);\r\n    if (!root) {\r\n      root = element;\r\n    }\r\n    currentParent = element; // div>ul>li li\r\n    stack.push(element);\r\n  }\r\n\r\n  function end(tagName) {\r\n    let element = stack.pop();\r\n    currentParent = stack[stack.length - 1];\r\n    if (currentParent) {\r\n      element.parent = currentParent;\r\n      currentParent.children.push(element);\r\n    }\r\n  }\r\n\r\n  function chars(text) {\r\n    text = text.replace(/\\s/g, \"\");\r\n    if (text) {\r\n      currentParent.children.push({\r\n        type: 3,\r\n        text,\r\n      });\r\n    }\r\n  }\r\n\r\n  function advance(n) {\r\n    html = html.substring(n);\r\n  }\r\n\r\n  function parseStartTag() {//解析类似开始标签<div id=\"1\" a=\"2\">  结果为{tagName:\"div\",attrs:[{name:\"id\",value:\"1\"},{name:\"a\",value:\"2\"}]}\r\n    const start = html.match(startTagOpen);//start =['<div','div']\r\n    if (start) {\r\n      let match = {\r\n        tagName: start[1],//div\r\n        attrs: [],\r\n      };\r\n      advance(start[0].length); //\"<div\".length 删去html字符串开始标签的<div\r\n      // 查找属性\r\n      let end, attr;\r\n      //不是开头标签结尾就一直解析\r\n      while (\r\n        !(end = html.match(startTagClose)) &&\r\n        (attr = html.match(attribute))\r\n      ) {\r\n        advance(attr[0].length); // a=1 a=\"1\" a='1'\r\n        match.attrs.push({\r\n          name: attr[1],\r\n          value: attr[3] || attr[4] || attr[5] || true,\r\n        });\r\n      }\r\n      if (end) {\r\n        advance(end[0].length);\r\n        return match;\r\n      }\r\n    }\r\n  }\r\n\r\n  while (html) {\r\n    let textEnd = html.indexOf(\"<\");\r\n    if (textEnd == 0) {\r\n      let startTagMatch = parseStartTag();\r\n      if (startTagMatch) {\r\n        // 开始标签\r\n        start(startTagMatch.tagName, startTagMatch.attrs);\r\n        continue;\r\n      }\r\n      // 结束标签\r\n      let endTagMatch = html.match(endTag);\r\n      if (endTagMatch) {\r\n        advance(endTagMatch[0].length);\r\n        end(endTagMatch[1]);\r\n        continue;\r\n      }\r\n    }\r\n    let text;\r\n    if (textEnd > 0) {\r\n      // 开始解析文本\r\n      text = html.substring(0, textEnd);\r\n    }\r\n    if (text) {\r\n      advance(text.length);\r\n      chars(text);\r\n    }\r\n  }\r\n  return root;\r\n}\r\n","\r\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\r\nfunction genProps(attrs) {\r\n    let str = '';\r\n    for (let i = 0; i < attrs.length; i++) {\r\n        let attr = attrs[i]; // name,value\r\n        if (attr.name === 'style') {\r\n            let obj = {};\r\n            attr.value.split(';').forEach(item => {\r\n                let [key, value] = item.split(':');\r\n                obj[key] = value\r\n            });\r\n            attr.value = obj; // {style:{color:red}}\r\n        }\r\n        str += `${attr.name}:${JSON.stringify(attr.value)},` // {a:'aaa',a:1,b:2,}\r\n    }\r\n    return `{${str.slice(0,-1)}}`;\r\n}\r\n\r\nfunction genChildren(el) {\r\n    const children  = el.children;\r\n    if(children){\r\n        return children.map(child=>gen(child)).join(',')\r\n    }\r\n}\r\nfunction gen(node){ //childrenk可能是元素也可能是文本，要区分写两个方法 \r\n    if(node.type == 1){\r\n        return generate(node);//如果是元素，直接调用构造元素render的方法\r\n    }else{\r\n        //文本 逻辑不能用 _c来处理\r\n        // 有{{}} 普通文本  混合文本 {{aa}} aaa {{bbb}} ccc\r\n        let text =  node.text;\r\n        if(defaultTagRE.test(text)){ // _v(_s(name) + 'aa' + _s(age) + '哈哈'）\r\n            let tokens = [];\r\n            let match ;\r\n            let index = 0;\r\n            let lastIndex = defaultTagRE.lastIndex = 0;\r\n            while(match = defaultTagRE.exec(text)){ // aa {{ age }} haha \r\n                index = match.index;\r\n                if(index >lastIndex){\r\n                    tokens.push(JSON.stringify(text.slice(lastIndex,index)));\r\n                }\r\n                tokens.push(`_s(${match[1].trim()})`);\r\n                lastIndex = index + match[0].length;\r\n            }\r\n            if(lastIndex < text.length){\r\n                tokens.push(JSON.stringify(text.slice(lastIndex)))\r\n            }\r\n            return  `_v(${tokens.join('+')})`\r\n\r\n            // 是带有{{}}\r\n        }else{\r\n            return `_v(${JSON.stringify(text)})`\r\n        }\r\n    }\r\n}\r\nexport function generate(el) { //结果 _c(tag,attrs.join(\",\"),...children_c)\r\n    // console.log(el); // 转换成render代码\r\n    let children = genChildren(el);\r\n    let code = `_c('${el.tag}',${\r\n        el.attrs.length? genProps(el.attrs):'undefined'\r\n    } ${\r\n        children? (',' + children) : ''\r\n    })`;\r\n    // => js代码 html=> js代码  字符串拼接\r\n    return code;\r\n}\r\n\r\n\r\n/* \r\n<div id=\"app\" a=1 b=2>\r\n    <span style\"=color:red\">{{name}} <a>hello</a></span>\r\n</div> \r\n _c(\r\n    'div',{id:'app',a:1,b:2}\r\n    ,_c(\r\n        'span',\r\n        {style:{color:'red'}}\r\n        ,_s(_v(name)),\r\n        _c(a,undefined,_v('hello'))\r\n        )\r\n)\r\n*/","import { parseHTML } from \"./parse\";\r\nimport { generate } from \"./generate\";\r\nexport function compileToFunctions(template) {\r\n  let ast = parseHTML(template); //生成ast语法树\r\n  console.log(\"ast语法树\",ast);\r\n  let code = generate(ast); //生成render代码字符串\r\n  console.log(\"render 函数\",code)\r\n  let render = `with(this){return ${code}}`;//还是一个字符串\r\n\r\n  let fn = new Function(render); //可以让字符串变成一个函数\r\n  return fn;\r\n}\r\n","let id = 0;\r\nclass Watcher {\r\n    constructor(vm,fn,cb,options){\r\n        this.vm = vm;\r\n        this.fn = fn;\r\n        this.cb = cb;\r\n        this.options = options;\r\n        this.id = id++;\r\n        this.fn(); // 调用传入的函数\r\n    }\r\n}\r\nexport default Watcher;","export function patch(oldVnode, vnode) {\r\n    // oldVnode 是一个真实的元素\r\n    const isRealElement = oldVnode.nodeType\r\n    if (isRealElement) {\r\n        // 初次渲染\r\n        const oldElm = oldVnode; // id=\"app\"\r\n        const parentElm = oldElm.parentNode; // body\r\n        let el = createElm(vnode);\r\n        console.log(\"真实DOM\",el)\r\n        parentElm.insertBefore(el, oldElm.nextSibling); // 将创建的节点查到原有的节点的下一个\r\n        parentElm.removeChild(oldElm);\r\n        return el; // vm.$el\r\n    } else {\r\n        // diff算法\r\n    }\r\n}\r\n\r\nfunction createElm(vnode) { // 根据虚拟节点创建真实的节点\r\n    let { tag, children, key, data, text, vm } = vnode;\r\n    if(typeof tag === 'string'){\r\n        console.log(tag)\r\n        // 可能是组件\r\n        vnode.el =  document.createElement(tag); // 用vue的指令时 可以通过vnode拿到真实dom\r\n        updateProperties(vnode);\r\n        children.forEach(child=>{ // 如果有儿子节点，就进行递归操作\r\n           vnode.el.appendChild(createElm(child))\r\n        })\r\n    }else{\r\n        vnode.el = document.createTextNode(text)\r\n    }\r\n\r\n    return vnode.el;\r\n}\r\nfunction updateProperties(vnode){\r\n    let newProps = vnode.data || {}; // 属性\r\n    let el = vnode.el; // dom元素\r\n\r\n    for(let key in newProps){\r\n        if(key == 'style'){\r\n            for(let styleName in newProps.style){\r\n                el.style[styleName] = newProps.style[styleName]\r\n            }\r\n        }else if(key === 'class'){\r\n            el.className = newProps.class\r\n        }else{\r\n            el.setAttribute(key,newProps[key]);\r\n        }\r\n    }\r\n\r\n\r\n}","import Watcher from \"./observer/watcher\"\r\nimport { patch } from './vdom/patch'\r\nexport function lifecycleMixin(Vue) {\r\n    Vue.prototype._update = function(vnode) {\r\n        // 将虚拟节点转换成真实的dom\r\n        const vm = this;\r\n        // 首次渲染 需要用虚拟节点 来更新真实的dom元素\r\n        vm.$el = patch(vm.$options.el, vnode);\r\n    }\r\n}\r\n\r\n\r\nexport function mountComponent(vm, el) {\r\n\r\n\r\n    // 默认vue是通过watcher来进行渲染  = 渲染watcher （每一个组件都有一个渲染watcher）\r\n    let updateComponent = () => {\r\n        vm._update(vm._render()); //vm._render执行后返回的是虚拟dom 方法再render.js里，就是让$options.render==》render函数执行\r\n    }\r\n    new Watcher(vm, updateComponent, () => {}, true); // updateComponent();\r\n}","import { initState } from \"./state\";\r\nimport { compileToFunctions } from \"./compiler/index.js\";\r\nimport { mountComponent } from \"./lifecycle.js\";\r\nexport function initMixin(Vue) {\r\n  Vue.prototype._init = function (options) {\r\n    const vm = this;\r\n    vm.$options = options; //实例上有个属性$options 表示的是用户传入的所有属性\r\n    //初始化状态\r\n    initState(vm);\r\n\r\n    if (vm.$options.el) {\r\n      //数据可以挂载到页面上了\r\n      vm.$mount(vm.$options.el);\r\n    }\r\n  };\r\n  Vue.prototype.$mount = function (el) {\r\n    el = document.querySelector(el);\r\n    const vm = this;\r\n    const options = vm.$options;\r\n    vm.$options.el=el;\r\n    if(!options.render){//如果不是new Vue({render(){}})的写法\r\n        let template=options.template;//在options上写template的写法\r\n        if(!template&&el){\r\n            template=el.outerHTML;// 火狐不兼容 document.createElement('div').appendChild('app').innerHTMl\r\n        }\r\n        const render =compileToFunctions(template);//把模板编译成render函数\r\n        options.render=render;//挂载到options上render函数\r\n    }\r\n    mountComponent(vm,el);//两个步骤 ：vm_render()执行返回虚拟DOM vnode===>vm._update(vnode)执行，调用patch(vm.$options.el,vnode)执行，形成真实dom一次性挂载在根节点上\r\n  };\r\n}\r\n","export function createElement(vm, tag, data = {}, ...children) {\r\n    return vnode(vm, tag, data, data.key, children, undefined);\r\n}\r\nexport function createTextVnode(vm, text) {\r\n    return vnode(vm,undefined,undefined,undefined,undefined,text)\r\n}\r\nfunction vnode(vm, tag, data, key, children, text) {\r\n    return {\r\n        vm,\r\n        tag,\r\n        children,\r\n        data,\r\n        key,\r\n        text\r\n    }\r\n}","import { createElement, createTextVnode } from \"./vdom/index.js\"\r\n\r\nexport function renderMixin(Vue) {\r\n    Vue.prototype._c = function(...args) { // 创建元素的虚拟节点\r\n        return createElement(this,...args);\r\n    }   \r\n    Vue.prototype._v = function(text) { // 创建文本的虚拟节点\r\n        return createTextVnode(this,text);\r\n    }\r\n    Vue.prototype._s = function(val) { // 转化成字符串\r\n        return val == null ? '' : (typeof val == 'object') ? JSON.stringify(val) : val\r\n    }\r\n    Vue.prototype._render = function() {\r\n        // render\r\n        const vm = this;\r\n        let render = vm.$options.render; // 获取编译后的render方法\r\n        // 调用render方法产生虚拟节点\r\n        let vnode = render.call(vm); // _c(xxx,xx,xxx,xxx) 调用时会自动将变量进行取值，将实例结果进行渲染相当于 with(vm){age,name},这里render函数里是变量，即vm下的变量，这样从花括号里取值\r\n        console.log(\"虚拟节点\",vnode)\r\n        return vnode; // 虚拟节点\r\n\r\n        // _c('div',{},_c())\r\n    }\r\n}","import {initMixin} from \"./init.js\"\r\nimport { lifecycleMixin } from \"./lifecycle\";\r\nimport { renderMixin } from \"./render\";\r\nfunction Vue(options){\r\n    this._init(options);//当用户new Vue时，就调用init方法进行Vue的初始方法\r\n}\r\n\r\n//可以拆分逻辑到不同的文件中，更利于代码维护 模块化的概念\r\n\r\ninitMixin(Vue);//扩展初始化方法\r\nlifecycleMixin(Vue);\r\nrenderMixin(Vue);\r\nexport default Vue;"],"names":["oldArrayProtoMethods","Array","prototype","arrayMethods","Object","create","methods","forEach","method","args","result","call","inserted","ob","__ob__","slice","observeArray","observe","data","console","error","Observer","value","defineProperty","enumerable","configurable","isArray","setPrototypeOf","walk","i","length","key","defineReactive","get","set","newValue","initState","vm","opts","$options","initData","_data","Proxy","source","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parseHTML","html","createASTElement","tag","attrs","type","children","parent","root","currentParent","stack","start","tagName","element","push","end","pop","chars","text","replace","advance","n","substring","parseStartTag","match","attr","name","textEnd","indexOf","startTagMatch","endTagMatch","defaultTagRE","genProps","str","obj","split","item","JSON","stringify","genChildren","el","map","child","gen","join","node","generate","test","tokens","index","lastIndex","exec","trim","code","compileToFunctions","template","ast","log","render","fn","Function","id","Watcher","cb","options","patch","oldVnode","vnode","isRealElement","nodeType","oldElm","parentElm","parentNode","createElm","insertBefore","nextSibling","removeChild","document","createElement","updateProperties","appendChild","createTextNode","newProps","styleName","style","className","setAttribute","lifecycleMixin","Vue","_update","$el","mountComponent","updateComponent","_render","initMixin","_init","$mount","querySelector","outerHTML","undefined","createTextVnode","renderMixin","_c","_v","_s","val"],"mappings":"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"}